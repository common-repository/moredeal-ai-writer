(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{169:function(e,t,n){"use strict";var r,s,i=n(7294);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=i.createElement("defs",null,i.createElement("path",{id:"copy_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,s||(s=i.createElement("mask",{id:"copy_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#copy_svg__a"}))),i.createElement("g",{mask:"url(#copy_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4.333 1.667)",d:"M0 2.48V.94C0 .42.42 0 .94 0h8.12c.52 0 .94.42.94.94v8.12c0 .52-.42.94-.94.94H7.51"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.667 4.333)",d:"M.94 0C.42 0 0 .42 0 .94v8.12c0 .52.42.94.94.94h8.12c.52 0 .94-.42.94-.94V.94C10 .42 9.58 0 9.06 0H.94Z"}))))}},7175:function(e,t,n){"use strict";var r,s,i=n(7294);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=i.createElement("defs",null,i.createElement("path",{id:"edit_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,s||(s=i.createElement("mask",{id:"edit_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#edit_svg__a"}))),i.createElement("g",{mask:"url(#edit_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.5 11)",d:"M2.83 0v3c0 .37-.3.67-.66.67H0"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 1.333)",d:"M10.67 4V.67c0-.37-.3-.67-.67-.67H.67C.3 0 0 .3 0 .67v12c0 .36.3.66.67.66h2"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 5.333)",d:"M0 0h4.67"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(7.667 7.667)",d:"m0 7 5.67-7"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 8)",d:"M0 0h2.67"}))))}},6889:function(e,t,n){"use strict";n.d(t,{qE:function(){return h},aR:function(){return f},eL:function(){return g}});var r,s,i,l,o=n(5893),a=n(3048),c=n(3657),u=n(7294);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e){return u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:30,height:30,fill:"none"},e),r||(r=u.createElement("defs",null,u.createElement("path",{id:"black-bot_svg__a",d:"M0 0h30v30H0z"}),u.createElement("path",{id:"black-bot_svg__c",d:"M0 0h20.455v20.455H0z"}))),u.createElement("g",null,s||(s=u.createElement("rect",{fill:"#E7F8FF",width:30,height:30,rx:10})),i||(i=u.createElement("mask",{id:"black-bot_svg__b",fill:"#fff"},u.createElement("use",{xlinkHref:"#black-bot_svg__a"}))),u.createElement("g",{mask:"url(#black-bot_svg__b)"},u.createElement("g",{transform:"translate(4.773 4.773)"},l||(l=u.createElement("mask",{id:"black-bot_svg__d",fill:"#fff"},u.createElement("use",{xlinkHref:"#black-bot_svg__c"}))),u.createElement("g",{mask:"url(#black-bot_svg__d)"},u.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M19.11 8.37c.17-.52.26-1.06.26-1.61 0-.9-.24-1.79-.71-2.57a5.24 5.24 0 0 0-4.53-2.59c-.37 0-.73.04-1.09.11A5.201 5.201 0 0 0 9.17 0h-.04C6.86 0 4.86 1.44 4.16 3.57A5.11 5.11 0 0 0 .71 6.04C.24 6.83 0 7.72 0 8.63c0 1.27.48 2.51 1.35 3.45-.18.52-.27 1.07-.27 1.61 0 .91.25 1.8.71 2.58 1.13 1.94 3.41 2.94 5.63 2.47a5.18 5.18 0 0 0 3.86 1.71h.05c2.26 0 4.27-1.44 4.97-3.57a5.132 5.132 0 0 0 3.45-2.47c.46-.78.7-1.67.7-2.58 0-1.28-.48-2.51-1.34-3.46ZM8.947 18.158c-.04.03-.08.05-.12.07.7.58 1.57.89 2.48.89h.01c2.14 0 3.88-1.72 3.88-3.83v-4.76c0-.02-.02-.04-.04-.05l-1.74-.99v5.75c0 .23-.13.45-.34.57l-4.13 2.35Zm-.67-1.153 4.17-2.38c.02-.01.03-.03.03-.05v-1.99l-5.04 2.87c-.21.12-.47.12-.68 0l-4.13-2.35c-.04-.02-.09-.06-.12-.07-.04.21-.06.43-.06.65 0 .67.18 1.33.52 1.92v-.01c.7 1.19 1.98 1.92 3.37 1.92.68 0 1.35-.18 1.94-.51ZM3.903 5.168v-.14c-.85.31-1.57.9-2.02 1.68a3.78 3.78 0 0 0-.52 1.91c0 1.37.74 2.64 1.94 3.33l4.17 2.37c.02.01.04.01.06 0l1.75-1-5.04-2.87a.64.64 0 0 1-.34-.57v-4.71Zm13.253 3.337-4.18-2.38c-.02 0-.04 0-.06.01l-1.74.99 5.04 2.87c.21.12.34.34.34.58v4.85c1.52-.56 2.54-1.99 2.54-3.6 0-1.37-.74-2.63-1.94-3.32ZM8.014 5.83c-.02.01-.03.03-.03.05v1.99L13.024 5a.692.692 0 0 1 .68 0l4.13 2.35c.04.02.08.05.12.07.03-.21.05-.43.05-.65 0-2.11-1.74-3.83-3.88-3.83-.68 0-1.35.18-1.94.51l-4.17 2.38Zm1.133-4.492c-2.15 0-3.89 1.72-3.89 3.83v4.76c0 .02.02.03.03.04l1.75 1v-5.75c0-.23.13-.45.34-.57l4.13-2.35c.04-.03.09-.06.12-.07-.7-.58-1.58-.89-2.48-.89ZM7.983 11.51l2.24 1.27 2.25-1.27V8.95l-2.25-1.28-2.24 1.28v2.56Z"}))))))};function m(e,t){return"https://cdn.staticfile.org/emoji-datasource-apple/14.0.0/img/".concat(t,"/64/").concat(e,".png")}function f(e){return(0,o.jsx)(a.ZP,{lazyLoadEmojis:!0,theme:a.Q2.AUTO,getEmojiUrl:m,onEmojiClick:t=>{e.onEmojiClick(t.unified)}})}function h(e){if(e.model){var t;return(0,o.jsx)("div",{className:"no-dark",children:(null===(t=e.model)||void 0===t?void 0:t.startsWith("gpt-4"))?(0,o.jsx)(p,{className:"user-avatar"}):(0,o.jsx)(c.Z,{className:"user-avatar"})})}return(0,o.jsx)("div",{className:"user-avatar",children:e.avatar&&(0,o.jsx)(g,{avatar:e.avatar})})}function g(e){var t;return(0,o.jsx)(a.dy,{unified:e.avatar,size:null!==(t=e.size)&&void 0!==t?t:18,getEmojiUrl:m})}},914:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(5893);n(7294);var s=n(6879),i=n.n(s);function l(e){let{onChange:t,title:n,value:s,className:l,min:o,max:a,step:c}=e;return(0,r.jsxs)("div",{className:i()["input-range"]+" ".concat(null!=l?l:""),children:[n||s,(0,r.jsx)("input",{type:"range",title:n,value:s,min:o,max:a,step:c,onChange:t})]})}},9052:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var r=n(5893),s=n(4347),i=n(7729),l=n(914),o=n(1420);function a(e){var t,n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.HC,{title:i.ZP.Settings.Model,children:(0,r.jsx)(o.Ph,{value:e.modelConfig.model,onChange:t=>{e.updateConfig(e=>e.model=s.Xm.model(t.currentTarget.value))},children:s.L.map(e=>(0,r.jsx)("option",{value:e.name,disabled:!e.available,children:e.name},e.name))})}),(0,r.jsx)(o.HC,{title:i.ZP.Settings.Temperature.Title,subTitle:i.ZP.Settings.Temperature.SubTitle,children:(0,r.jsx)(l.O,{value:null===(t=e.modelConfig.temperature)||void 0===t?void 0:t.toFixed(1),min:"0",max:"1",step:"0.1",onChange:t=>{e.updateConfig(e=>e.temperature=s.Xm.temperature(t.currentTarget.valueAsNumber))}})}),(0,r.jsx)(o.HC,{title:i.ZP.Settings.MaxTokens.Title,subTitle:i.ZP.Settings.MaxTokens.SubTitle,children:(0,r.jsx)("input",{type:"number",min:100,max:32e3,value:e.modelConfig.max_tokens,onChange:t=>e.updateConfig(e=>e.max_tokens=s.Xm.max_tokens(t.currentTarget.valueAsNumber))})}),(0,r.jsx)(o.HC,{title:i.ZP.Settings.PresencePenlty.Title,subTitle:i.ZP.Settings.PresencePenlty.SubTitle,children:(0,r.jsx)(l.O,{value:null===(n=e.modelConfig.presence_penalty)||void 0===n?void 0:n.toFixed(1),min:"-2",max:"2",step:"0.1",onChange:t=>{e.updateConfig(e=>e.presence_penalty=s.Xm.presence_penalty(t.currentTarget.valueAsNumber))}})}),(0,r.jsx)(o.HC,{title:i.ZP.Settings.HistoryCount.Title,subTitle:i.ZP.Settings.HistoryCount.SubTitle,children:(0,r.jsx)(l.O,{title:e.modelConfig.historyMessageCount.toString(),value:e.modelConfig.historyMessageCount,min:"0",max:"32",step:"1",onChange:t=>e.updateConfig(e=>e.historyMessageCount=t.target.valueAsNumber)})}),(0,r.jsx)(o.HC,{title:i.ZP.Settings.CompressThreshold.Title,subTitle:i.ZP.Settings.CompressThreshold.SubTitle,children:(0,r.jsx)("input",{type:"number",min:500,max:4e3,value:e.modelConfig.compressMessageLengthThreshold,onChange:t=>e.updateConfig(e=>e.compressMessageLengthThreshold=t.currentTarget.valueAsNumber)})}),(0,r.jsx)(o.HC,{title:i.ZP.Memory.Title,subTitle:i.ZP.Memory.Send,children:(0,r.jsx)("input",{type:"checkbox",checked:e.modelConfig.sendMemory,onChange:t=>e.updateConfig(e=>e.sendMemory=t.currentTarget.checked)})})]})}},6698:function(e,t,n){"use strict";n.r(t),n.d(t,{Settings:function(){return A}});var r,s,i=n(5893),l=n(7294),o=n(811),a=n.n(o),c=n(5755),u=n(448),d=n(7637),p=n(169);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){return l.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=l.createElement("defs",null,l.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),l.createElement("g",null,s||(s=l.createElement("mask",{id:"clear_svg__b",fill:"#fff"},l.createElement("use",{xlinkHref:"#clear_svg__a"}))),l.createElement("g",{mask:"url(#clear_svg__b)"},l.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 5)",d:"M1 9.67h8.67l1-9.67H0l1 9.67Z"}),l.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.667 8.334)",d:"M0 0v3.33"}),l.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.334 8.333)",d:"M0 0v3.33"}),l.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 1)",d:"m0 4 5.44-4L8 4"}))))},h=n(396),g=n(7175),v=n(5538),b=n(1420),x=n(9052),j=n(7056),_=n(4347),k=n(7729),C=n(493),y=n(1664),P=n.n(y),S=n(9136),E=n(6786),T=n(6434),Z=n(914),w=n(9250),O=n(6889);function M(e){let t=(0,E.f)(),n=t.get(e.id);return n?(0,i.jsx)("div",{className:"modal-mask",children:(0,i.jsx)(b.u_,{title:k.ZP.Settings.Prompt.EditModal.Title,onClose:e.onClose,actions:[(0,i.jsx)(j.h,{onClick:e.onClose,text:k.ZP.UI.Confirm,bordered:!0},"")],children:(0,i.jsxs)("div",{className:a()["edit-prompt-modal"],children:[(0,i.jsx)("input",{type:"text",value:n.title,readOnly:!n.isUser,className:a()["edit-prompt-title"],onInput:n=>t.update(e.id,e=>e.title=n.currentTarget.value)}),(0,i.jsx)(b.II,{value:n.content,readOnly:!n.isUser,className:a()["edit-prompt-content"],rows:10,onInput:n=>t.update(e.id,e=>e.content=n.currentTarget.value)})]})})}):null}function N(e){var t;let n=(0,E.f)(),r=n.getUserPrompts(),s=E.o.builtinPrompts,o=r.concat(s),[c,d]=(0,l.useState)(""),[m,h]=(0,l.useState)([]),x=c.length>0?m:o,[_,y]=(0,l.useState)();return(0,l.useEffect)(()=>{if(c.length>0){let e=E.o.search(c);h(e)}else h([])},[c]),(0,i.jsxs)("div",{className:"modal-mask",children:[(0,i.jsx)(b.u_,{title:k.ZP.Settings.Prompt.Modal.Title,onClose:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)},actions:[(0,i.jsx)(j.h,{onClick:()=>n.add({title:"Empty Prompt",content:"Empty Prompt Content"}),icon:(0,i.jsx)(u.Z,{}),bordered:!0,text:k.ZP.Settings.Prompt.Modal.Add},"add")],children:(0,i.jsxs)("div",{className:a()["user-prompt-modal"],children:[(0,i.jsx)("input",{type:"text",className:a()["user-prompt-search"],placeholder:k.ZP.Settings.Prompt.Modal.Search,value:c,onInput:e=>d(e.currentTarget.value)}),(0,i.jsx)("div",{className:a()["user-prompt-list"],children:x.map((e,r)=>(0,i.jsxs)("div",{className:a()["user-prompt-item"],children:[(0,i.jsxs)("div",{className:a()["user-prompt-header"],children:[(0,i.jsx)("div",{className:a()["user-prompt-title"],children:e.title}),(0,i.jsx)("div",{className:a()["user-prompt-content"]+" one-line",children:e.content})]}),(0,i.jsxs)("div",{className:a()["user-prompt-buttons"],children:[e.isUser&&(0,i.jsx)(j.h,{icon:(0,i.jsx)(f,{}),className:a()["user-prompt-button"],onClick:()=>n.remove(e.id)}),e.isUser?(0,i.jsx)(j.h,{icon:(0,i.jsx)(g.Z,{}),className:a()["user-prompt-button"],onClick:()=>y(e.id)}):(0,i.jsx)(j.h,{icon:(0,i.jsx)(v.Z,{}),className:a()["user-prompt-button"],onClick:()=>y(e.id)}),(0,i.jsx)(j.h,{icon:(0,i.jsx)(p.Z,{}),className:a()["user-prompt-button"],onClick:()=>(0,C.vQ)(e.content)})]})]},null!==(t=e.id)&&void 0!==t?t:e.title))})]})}),void 0!==_&&(0,i.jsx)(M,{id:_,onClose:()=>y(void 0)})]})}function U(e){let t=new Date(+e),n=t.getUTCFullYear(),r=t.getUTCMonth()+1,s=t.getUTCDate();return[n.toString(),r.toString().padStart(2,"0"),s.toString().padStart(2,"0")].join("")}function A(){var e,t,n,r;let s=(0,w.s0)(),[o,u]=(0,l.useState)(!1),p=(0,_.MG)(),m=p.update,v=p.reset,C=(0,_.aK)(),y=(0,_.u2)(),[M,A]=(0,l.useState)(!1),H=U(y.version),I=U(y.remoteVersion),R=H!==I;function L(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];A(!0),y.getLatestVersion(e).then(()=>{A(!1)}),console.log("[Update] local version ",new Date(+y.version).toLocaleString()),console.log("[Update] remote version ",new Date(+y.remoteVersion).toLocaleString())}let D={used:y.used,subscription:y.subscription},[V,F]=(0,l.useState)(!1);function z(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];F(!0),y.updateUsage(e).finally(()=>{F(!1)})}let W=(0,_._X)(),K=(0,l.useMemo)(()=>W.enabledAccessControl(),[]),Q=(0,E.f)(),X=E.o.count.builtin,B=null!==(e=Q.getUserPrompts().length)&&void 0!==e?e:0,[G,q]=(0,l.useState)(!1),J=W.isAuthorized();return(0,l.useEffect)(()=>{L(),J&&z()},[]),(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s(S.y$.Home)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,i.jsxs)(T.S,{children:[(0,i.jsxs)("div",{className:"window-header",children:[(0,i.jsxs)("div",{className:"window-header-title",children:[(0,i.jsx)("div",{className:"window-header-main-title",children:k.ZP.Settings.Title}),(0,i.jsx)("div",{className:"window-header-sub-title",children:k.ZP.Settings.SubTitle})]}),(0,i.jsxs)("div",{className:"window-actions",children:[(0,i.jsx)("div",{className:"window-action-button",children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(f,{}),onClick:()=>{confirm(k.ZP.Settings.Actions.ConfirmClearAll)&&C.clearAllData()},bordered:!0,title:k.ZP.Settings.Actions.ClearAll})}),(0,i.jsx)("div",{className:"window-action-button",children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(c.Z,{}),onClick:()=>{confirm(k.ZP.Settings.Actions.ConfirmResetAll)&&v()},bordered:!0,title:k.ZP.Settings.Actions.ResetAll})}),(0,i.jsx)("div",{className:"window-action-button",children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(d.Z,{}),onClick:()=>s(S.y$.Home),bordered:!0,title:k.ZP.Settings.Actions.Close})})]})]}),(0,i.jsxs)("div",{className:a().settings,children:[(0,i.jsxs)(b.aV,{children:[(0,i.jsx)(b.HC,{title:k.ZP.Settings.Avatar,children:(0,i.jsx)(b.J2,{onClose:()=>u(!1),content:(0,i.jsx)(O.aR,{onEmojiClick:e=>{m(t=>t.avatar=e),u(!1)}}),open:o,children:(0,i.jsx)("div",{className:a().avatar,onClick:()=>u(!0),children:(0,i.jsx)(O.qE,{avatar:p.avatar})})})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Update.Version(null!=H?H:"unknown"),subTitle:M?k.ZP.Settings.Update.IsChecking:R?k.ZP.Settings.Update.FoundUpdate(null!=I?I:"ERROR"):k.ZP.Settings.Update.IsLatest,children:M?(0,i.jsx)(h.Z,{}):R?(0,i.jsx)(P(),{href:S.Cs,target:"_blank",className:"link",children:k.ZP.Settings.Update.GoToUpdate}):(0,i.jsx)(j.h,{icon:(0,i.jsx)(c.Z,{}),text:k.ZP.Settings.Update.CheckUpdate,onClick:()=>L(!0)})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.SendKey,children:(0,i.jsx)(b.Ph,{value:p.submitKey,onChange:e=>{m(t=>t.submitKey=e.target.value)},children:Object.values(_.mQ).map(e=>(0,i.jsx)("option",{value:e,children:e},e))})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Theme,children:(0,i.jsx)(b.Ph,{value:p.theme,onChange:e=>{m(t=>t.theme=e.target.value)},children:Object.values(_.Q2).map(e=>(0,i.jsx)("option",{value:e,children:e},e))})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Lang.Name,children:(0,i.jsx)(b.Ph,{value:(0,k.VQ)(),onChange:e=>{(0,k.t4)(e.target.value)},children:k.DC.map(e=>(0,i.jsx)("option",{value:e,children:k.ZP.Settings.Lang.Options[e]},e))})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.FontSize.Title,subTitle:k.ZP.Settings.FontSize.SubTitle,children:(0,i.jsx)(Z.O,{title:"".concat(null!==(t=p.fontSize)&&void 0!==t?t:14,"px"),value:p.fontSize,min:"12",max:"18",step:"1",onChange:e=>m(t=>t.fontSize=Number.parseInt(e.currentTarget.value))})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.SendPreviewBubble.Title,subTitle:k.ZP.Settings.SendPreviewBubble.SubTitle,children:(0,i.jsx)("input",{type:"checkbox",checked:p.sendPreviewBubble,onChange:e=>m(t=>t.sendPreviewBubble=e.currentTarget.checked)})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Mask.Title,subTitle:k.ZP.Settings.Mask.SubTitle,children:(0,i.jsx)("input",{type:"checkbox",checked:!p.dontShowMaskSplashScreen,onChange:e=>m(t=>t.dontShowMaskSplashScreen=!e.currentTarget.checked)})})]}),(0,i.jsxs)(b.aV,{children:[K?(0,i.jsx)(b.HC,{title:k.ZP.Settings.AccessCode.Title,subTitle:k.ZP.Settings.AccessCode.SubTitle,children:(0,i.jsx)(b.WU,{value:W.accessCode,type:"text",placeholder:k.ZP.Settings.AccessCode.Placeholder,onChange:e=>{W.updateCode(e.currentTarget.value)}})}):(0,i.jsx)(i.Fragment,{}),W.hideUserApiKey?null:(0,i.jsx)(b.HC,{title:k.ZP.Settings.Token.Title,subTitle:k.ZP.Settings.Token.SubTitle,children:(0,i.jsx)(b.WU,{value:W.token,type:"text",placeholder:k.ZP.Settings.Token.Placeholder,onChange:e=>{W.updateToken(e.currentTarget.value)}})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Usage.Title,subTitle:J?V?k.ZP.Settings.Usage.IsChecking:k.ZP.Settings.Usage.SubTitle(null!==(n=null==D?void 0:D.used)&&void 0!==n?n:"[?]",null!==(r=null==D?void 0:D.subscription)&&void 0!==r?r:"[?]"):k.ZP.Settings.Usage.NoAccess,children:!J||V?(0,i.jsx)("div",{}):(0,i.jsx)(j.h,{icon:(0,i.jsx)(c.Z,{}),text:k.ZP.Settings.Usage.Check,onClick:()=>z(!0)})})]}),(0,i.jsxs)(b.aV,{children:[(0,i.jsx)(b.HC,{title:k.ZP.Settings.Prompt.Disable.Title,subTitle:k.ZP.Settings.Prompt.Disable.SubTitle,children:(0,i.jsx)("input",{type:"checkbox",checked:p.disablePromptHint,onChange:e=>m(t=>t.disablePromptHint=e.currentTarget.checked)})}),(0,i.jsx)(b.HC,{title:k.ZP.Settings.Prompt.List,subTitle:k.ZP.Settings.Prompt.ListCount(X,B),children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(g.Z,{}),text:k.ZP.Settings.Prompt.Edit,onClick:()=>q(!0)})})]}),(0,i.jsx)(b.aV,{children:(0,i.jsx)(x.j,{modelConfig:p.modelConfig,updateConfig:e=>{let t={...p.modelConfig};e(t),p.update(e=>e.modelConfig=t)}})}),G&&(0,i.jsx)(N,{onClose:()=>q(!1)})]})]})}},6786:function(e,t,n){"use strict";n.d(t,{f:function(){return c},o:function(){return a}});var r=n(4529),s=n(782),i=n(9632),l=n(7729),o=n(9136);let a={ready:!1,builtinEngine:new i.Z([],{keys:["title"]}),userEngine:new i.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),n=this.builtinEngine.search(e);return t.concat(n).map(e=>e.item)}},c=(0,r.Ue)()((0,s.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(n){let r=t().prompts;return n.id=t().latestId+1,n.isUser=!0,r[n.id]=n,e(()=>({latestId:n.id,prompts:r})),n.id},get(e){let n=t().prompts[e];return n||a.builtinPrompts.find(t=>t.id===e)},remove(n){let r=t().prompts;delete r[n],a.remove(n),e(()=>({prompts:r,counter:t().counter+1}))},getUserPrompts(){var e;let n=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return n.sort((e,t)=>t.id&&e.id?t.id-e.id:0),n},update(n,r){var s;let i=null!==(s=t().prompts[n])&&void 0!==s?s:{title:"",content:"",id:n};a.remove(n),r(i);let l=t().prompts;l[n]=i,e(()=>({prompts:l})),a.add(i)},search:e=>0===e.length?a.allPrompts.concat([...t().getUserPrompts()]):a.search(e)}),{name:o.KJ.Prompt,version:1,onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let n=[e.en,e.cn];"cn"===(0,l.VQ)()&&(n=n.reverse());let r=n.map(e=>e.map(e=>{let[t,n]=e;return{id:Math.random(),title:t,content:n}})),s=null!==(t=c.getState().getUserPrompts())&&void 0!==t?t:[],i=r.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);a.count.builtin=e.en.length+e.cn.length,a.init(i,s)})}}))},3991:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{PrefetchKind:function(){return n},ACTION_REFRESH:function(){return s},ACTION_NAVIGATE:function(){return i},ACTION_RESTORE:function(){return l},ACTION_SERVER_PATCH:function(){return o},ACTION_PREFETCH:function(){return a},ACTION_FAST_REFRESH:function(){return c},ACTION_SERVER_ACTION:function(){return u}});let s="refresh",i="navigate",l="restore",o="server-patch",a="prefetch",c="fast-refresh",u="server-action";(r=n||(n={})).AUTO="auto",r.FULL="full",r.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1516:function(e,t){"use strict";function n(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return j}});let r=n(8754),s=r._(n(7294)),i=n(4532),l=n(3353),o=n(1410),a=n(9064),c=n(370),u=n(9955),d=n(4224),p=n(508),m=n(1516),f=n(4266),h=n(3991),g=new Set;function v(e,t,n,r,s,i){if(!i&&!(0,l.isLocalURL)(t))return;if(!r.bypassPrefetchedCheck){let s=void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0,i=t+"%"+n+"%"+s;if(g.has(i))return;g.add(i)}let o=i?e.prefetch(t,s):e.prefetch(t,n,r);Promise.resolve(o).catch(e=>{})}function b(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}let x=s.default.forwardRef(function(e,t){let n,r;let{href:o,as:g,children:x,prefetch:j=null,passHref:_,replace:k,shallow:C,scroll:y,locale:P,onClick:S,onMouseEnter:E,onTouchStart:T,legacyBehavior:Z=!1,...w}=e;n=x,Z&&("string"==typeof n||"number"==typeof n)&&(n=s.default.createElement("a",null,n));let O=!1!==j,M=null===j?h.PrefetchKind.AUTO:h.PrefetchKind.FULL,N=s.default.useContext(u.RouterContext),U=s.default.useContext(d.AppRouterContext),A=null!=N?N:U,H=!N,{href:I,as:R}=s.default.useMemo(()=>{if(!N){let e=b(o);return{href:e,as:g?b(g):e}}let[e,t]=(0,i.resolveHref)(N,o,!0);return{href:e,as:g?(0,i.resolveHref)(N,g):t||e}},[N,o,g]),L=s.default.useRef(I),D=s.default.useRef(R);Z&&(r=s.default.Children.only(n));let V=Z?r&&"object"==typeof r&&r.ref:t,[F,z,W]=(0,p.useIntersection)({rootMargin:"200px"}),K=s.default.useCallback(e=>{(D.current!==R||L.current!==I)&&(W(),D.current=R,L.current=I),F(e),V&&("function"==typeof V?V(e):"object"==typeof V&&(V.current=e))},[R,V,I,W,F]);s.default.useEffect(()=>{A&&z&&O&&v(A,I,R,{locale:P},{kind:M},H)},[R,I,z,P,O,null==N?void 0:N.locale,A,H,M]);let Q={ref:K,onClick(e){Z||"function"!=typeof S||S(e),Z&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),A&&!e.defaultPrevented&&function(e,t,n,r,i,o,a,c,u,d){let{nodeName:p}=e.currentTarget,m="A"===p.toUpperCase();if(m&&(function(e){let t=e.currentTarget,n=t.getAttribute("target");return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,l.isLocalURL)(n)))return;e.preventDefault();let f=()=>{"beforePopState"in t?t[i?"replace":"push"](n,r,{shallow:o,locale:c,scroll:a}):t[i?"replace":"push"](r||n,{forceOptimisticNavigation:!d})};u?s.default.startTransition(f):f()}(e,A,I,R,k,C,y,P,H,O)},onMouseEnter(e){Z||"function"!=typeof E||E(e),Z&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),A&&(O||!H)&&v(A,I,R,{locale:P,priority:!0,bypassPrefetchedCheck:!0},{kind:M},H)},onTouchStart(e){Z||"function"!=typeof T||T(e),Z&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),A&&(O||!H)&&v(A,I,R,{locale:P,priority:!0,bypassPrefetchedCheck:!0},{kind:M},H)}};if((0,a.isAbsoluteUrl)(R))Q.href=R;else if(!Z||_||"a"===r.type&&!("href"in r.props)){let e=void 0!==P?P:null==N?void 0:N.locale,t=(null==N?void 0:N.isLocaleDomain)&&(0,m.getDomainLocale)(R,e,null==N?void 0:N.locales,null==N?void 0:N.domainLocales);Q.href=t||(0,f.addBasePath)((0,c.addLocale)(R,e,null==N?void 0:N.defaultLocale))}return Z?s.default.cloneElement(r,Q):s.default.createElement("a",{...w,...Q},n)}),j=x;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return a}});let r=n(7294),s=n(29),i="function"==typeof IntersectionObserver,l=new Map,o=[];function a(e){let{rootRef:t,rootMargin:n,disabled:a}=e,c=a||!i,[u,d]=(0,r.useState)(!1),p=(0,r.useRef)(null),m=(0,r.useCallback)(e=>{p.current=e},[]);(0,r.useEffect)(()=>{if(i){if(c||u)return;let e=p.current;if(e&&e.tagName){let r=function(e,t,n){let{id:r,observer:s,elements:i}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=o.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=l.get(r)))return t;let s=new Map,i=new IntersectionObserver(e=>{e.forEach(e=>{let t=s.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e);return t={id:n,observer:i,elements:s},o.push(n),l.set(n,t),t}(n);return i.set(e,t),s.observe(e),function(){if(i.delete(e),s.unobserve(e),0===i.size){s.disconnect(),l.delete(r);let e=o.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&o.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:n});return r}}else if(!u){let e=(0,s.requestIdleCallback)(()=>d(!0));return()=>(0,s.cancelIdleCallback)(e)}},[c,n,t,u,p.current]);let f=(0,r.useCallback)(()=>{d(!1)},[]);return[m,u,f]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6879:function(e){e.exports={"input-range":"input-range_input-range__QBkD1"}},811:function(e){e.exports={settings:"settings_settings__dC7Vo",avatar:"settings_avatar__yApsT","edit-prompt-modal":"settings_edit-prompt-modal__IZvoi","edit-prompt-title":"settings_edit-prompt-title__1PUIs","edit-prompt-content":"settings_edit-prompt-content__djmWB","user-prompt-modal":"settings_user-prompt-modal__O628_","user-prompt-search":"settings_user-prompt-search__uGQDB","user-prompt-list":"settings_user-prompt-list__eztCF","user-prompt-item":"settings_user-prompt-item__R4_0Y","user-prompt-header":"settings_user-prompt-header__I0mU1","user-prompt-title":"settings_user-prompt-title__RcMrV","user-prompt-content":"settings_user-prompt-content__dlvDK","user-prompt-buttons":"settings_user-prompt-buttons__2xrp5","user-prompt-button":"settings_user-prompt-button__7Q2lC"}},1664:function(e,t,n){e.exports=n(5569)}}]);